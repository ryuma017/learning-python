# リストとタプル - データの保持と操作

シーケンス:要素に番号を振って順番に並べられた構造。またこの番号をインデックス(index)と呼ぶ
リスト(list)」「タプル(tuple)」「文字列(string)」


## 2.1 シーケンスの概要

リストとタプルの違い → 要素の変更ができるかどうか
「値の集合」を扱う際に有用


## 2.2 シーケンスに対する一般的な操作

シーケンスに対しては操作(演算)が行える。関数が用意されている

### 2.2.1 インデックス指定

- `s[0]` - シーケンス`s`の最初の要素を返す

```
>>> greeting = "Hello"
>>> greeting[0]
'H'
```

- `s[-1]` - シーケンス`s`の最後の要素を返す

```
>>> greeting = "Hello"
>>> greeting[-1]
'o'
```

## 2.2.2 スライス指定

`:`で区切った2つのインデックスを指定し、シーケンスの範囲を指定。この記法をスライス(slice)と呼ぶ

- `s[p:q]` - シーケンスsのインデックスpからq−1までの要素を返す

```
>>> numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
>>> numbers[3:6]
[4, 5, 6]
>>> numbers[-3:-1]
[8, 9]
```

- `s[:]` - シーケンス`s`の全要素を返す

```
>>> numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
>>> numbers[:]
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
```

- `s[s:q:i]` - インデックス`p`の要素から始め、インデックス`q-1`の要素まで、 `i-1`個をスキップした要素を返す(`i`は1以上の場合)。`i`が1のときはスキップしない

```
>>> numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
>>> numbers[0:9:2]
[1, 3, 5, 7, 9]
>>> numbers[::3]
[1, 4, 7, 10]
```

## 2.2.3 シーケンスの加算

加算演算子(`+`)で結合できる。異なるデータ型は結合できない

```
>>> [1, 2, 3] + [4, 5, 6]
[1, 2, 3, 4, 5, 6]
>>> "hello," + "world"
'hello,world'
```

## 2.2.4 シーケンスの乗算

xを掛けると、もとのシーケンスをx回繰り返した新しいシーケンスを生成する

```
>>> "python" * 5
'pythonpythonpythonpythonpython'
>>> [42] * 10
[42, 42, 42, 42, 42, 42, 42, 42, 42, 42]
```

`None`を使うことで、値のないものが並んだシーケンスができる
```
>>> sequence = [None] * 10   # Noneは「何もない」ことを表す
>>> sequence   #「列」「並び」などの意味
[None, None, None, None, None, None, None, None, None, None]
```

## 2.2.5 メンバーシップテスト

- 演算子`in` - ある値がシーケンスの中にあるかどうか真偽をチェックする。

真 → `True` 、偽 → `False` を返す
このような演算子を「ブール演算子」と呼ぶ。演算の結果を「ブール値」或いは「真偽値」と呼ぶ

```
>>> permissions = "rw"   # パーミッション(rは「読み込み」、wは「書き込み」の許可を表す)
>>> "w" in permissions
True
>>> "x" in permissions   # xは「実行」の許可を表す
False
>>> users = ["mls", "foo", "bar"]
>>> input("ユーザー名を入力してください: ") in users   # usersの中に入力されたユーザー名があるか
ユーザー名を入力してください: foo
True
```

## 2.2.6 長さ、最大値、最小値

- `len[s]` - シーケンスsの要素数を返す

```
>>> numbers = [100, 34, 678]
>>> len(numbers)
3
```

- `max[s]` - シーケンスsの最大の要素を返す

```
>>> numbers = [100, 34, 678]
>>> max(numbers)
678
>>> max(2, 3)
3
```

- `min[s]` - シーケンスsの最小の要素を返す

```
>>> numbers = [100, 34, 678]
>>> min(numbers)
34
>>> min(9, 3, 2, 5)
2
```


# 2.3 リストの便利な機能

リストのように内容をを変更できることを「ミュータブル(mutable)である」と言う

## 2.3.1 list

- `list()` - 引数に指定された文字列をリストに変換。任意のシーケンスも指定できる

```
>>> list("hello")
['h', 'e', 'l', 'l', 'o']
>>> list("こんにちわ")
['こ', 'ん', 'に', 'ち', 'わ']
```

## 2.3.2 基本的なリストの操作

- `l[n] = a` - リストlのインデックスnの要素をaに変更

```
>>> x = [1, 1, 1]
>>> x[1] = 2
>>> x
[1, 2, 1]
```

- del文 - リストから要素を削除する

`del list[n]` - listのインデックス`n`の要素を削除

```
>>> names = ["太郎", "花子", "ジョン", "メアリー", "和宏"]
>>> del names[2]   #「ジョン」を削除
>>> names
['太郎', '花子', 'メアリー', '和宏']
```

- `l[n:] = list("･･･")` - リスト`l`のインデックス`n`以降の要素を、文字列`"･･･"`から作成したリストの要素に変更

```
>>> name = list("Perl")
>>> name
['P', 'e', 'r', 'l']
>>> name[2:] = list("ar")
>>> name
['P', 'e', 'a', 'r']
>>> name[1:] = list("ython")
>>> name
['P', 'y', 't', 'h', 'o', 'n']
```

- `l[n:n] = [･･･]` - インデックス`n`の要素の前に`･･･`を追加

```
>>> numbers = [1, 5]
>>> numbers[1:1] = [2, 3, 4]
>>> numbers
[1, 2, 3, 4, 5]
```

- `l[p:q] = []` - インデックス`p`から`q-1`の要素を削除

```
>>> numbers
[1, 2, 3, 4, 5]
>>> numbers[1:4] = []   # del numbers[1:4] と同じ効果
>>> numbers
[1, 5]
```

## 2.3.3 リスト関連のメソッド

メソッド: オブジェクト(リスト、数値、文字列など)と結びついた専用の関数
`オブジェクト名.メソッド名(引数)` # この形式で呼び出す

- appendメソッド - リストの最後にオブジェクトを追加

```
>>> list = [1, 2, 3]
>>> list.append(4)
>>> list
[1, 2, 3, 4]
```

- clearメソッド - 元のリストの内容をすべて消去

スライスへの代入`list[:] = []`と同じ効果

```
>>> list = [1, 2, 3]
>>> list.clear()
>>> list
```

- copyメソッド - リストを複製する

`y = x.copy()` - リストxのコピーをyにバインド(`y = x[:]` また `y = list(x)` と同じ効果)

```
>>> a = [1, 2, 3]
>>> b = a.copy()
>>> b[1] = 4
>>> b
[1, 4, 3]
```


- countメソッド - 引数に指定した要素がリスト内に何回出現するか数える

```
>>> ["to",  "be",  "or",  "not",  "to", "be"].count("to")
2
>>> x = [[1, 2], 1, 1, [2, 1, [1, 2]]]
>>> x.count(1)
2
>>> x.count([1, 2])
1
```

- extendメソッド - 追加したい複数の値をシーケンスにして与えることで、リストに一度に追加できる

`x.extend(y)` - リスト`x`の末尾にリスト`y`を代入

```
>>> a = [1, 2, 3]
>>> b = [4, 5, 6]
>>> a.extend(b)
>>> a
[1, 2, 3, 4, 5, 6]
```

- indexメソッド - リスト内を検索し、引数に指定した値が最初に現れるインデックスを見つけ出す

`x.index(y)` - リスト`x`から`y`の値を検索し、そのインデックスを返す

```
>>> sentence = ["隣", "の", "客", "は", "よく", "柿", "食う", "客", "だ"]
>>> sentence.index("柿")
5
>>> sentence[5]
'柿'
```

- insertメソッド - オブジェクトをリストに挿入する

`x.insert(n, y)` - リスト`x`のインデックス`n`の位置に`y`を挿入

```
>>> number = [1, 2, 3, 5, 6, 7]
>>> number.insert(3, "four")
>>> number
[1, 2, 3, 'four', 5, 6, 7]
```

- popメソッド - 引数に指定された要素(デフォルトでは最後の要素)をリストから削除し、削除した要素を返す

`x.pop()` - リストxの最後の要素を削除してそれを返す
`x.pop(n)` - リストxのインデックスnの要素を削除してそれを返す
(popメソッドは、リストを変更するとともに(None以外の)値を返す唯一のリスト関連のメソッド)

```
>>> x = [1, 2, 3]
>>> x.pop()
3
>>> x
[1, 2]
>>> x.pop(0)
1
>>> x
[2]
```



- removeメソッド - 指定された値のうちで最初に出現したものを削除する

`x.remove(y)` - リスト`x`の要素が`y`のものを削除

```
>>> words = ["to",  "be",  "or",  "not",  "to", "be"]
>>> words.remove("be")
>>> words
['to', 'or', 'not', 'to', 'be']
```

- reverseメソッド - リストの要素を逆順にする

`x.reverse` - リスト`x`の要素を後ろから並べる

```
>>> x = [1, 2, 3]
>>> x.reverse()
>>> x
[3, 2, 1]
```

- sortメソッド - リストの要素を並び替える(ソートする)

`x.sort()` - リスト`x`の要素をソートする

```
>>> x = [4, 6, 2, 1, 7, 9]
>>> x.sort()
>>> x
[1, 2, 4, 6, 7, 9]
```

- ソートの詳細指定 - sortメソッドは2つのオプションの引数を取る(`key`と`reverse`)

`key`: 関数を指定し、その関数がソートに使われる

```
>>> x = ["C", "C#", "Java", "JavaScript", "Objective-C", "Python"]
>>> x.sort(key=len)   # 文字の長さ順にソート
>>> x
['C', 'C#', 'Java', 'Python', 'JavaScript', 'Objective-C']
```

`reverse`: 真偽値(`True`または`False`)を指定。`True`の場合、リストを逆順でソート

```
>>> x = [4, 6, 2, 1, 7, 9]
>>> x.sort(reverse=True)
>>> x
[9, 7, 6, 4, 2, 1]
```


# 2.4 タプル

タプルは要素の変更ができない(この点は文字列と同じ)

- タプルの構文

`,`で区切る

```
>>> 1, 2, 3   #`,`で区切る
(1, 2, 3)   # 丸括弧()内に`,`で区切ったものが並べられた
```

丸括弧で囲む(こっちのほうが一般的)

```
>>> (1, 2, 3)   # 丸括弧()内に指定
(1, 2, 3)
```

- 空のタプル

()で表す

```
>>> ()
()
```

- 値を1つだけ入れたタプル

単独の値と区別するために、値のあとに`,`を付ける

```
>>> 42
42
>>> 42,   # `,`を付けることで単独の値と区別する
(42,)
>>> (42,)
(42,)
```

- タプルの乗算

上の例は単なる数値になる

```
>>> 3 * (40 + 2)   # 括弧内の数値を3倍にする
126
>>> 3 * (40 + 2,)   # タプルの乗算
(42, 42, 42)
```

- `tuple()` - 引数に指定された値をタプルに変換

`tuple([･･･, ･･･])`、
`tuple("･･･")`、
リストや文字列などをタプルにして返す
引数にタプルを指定すると、そのまま返す

```
>>> tuple([1, 2, 3])
(1, 2, 3)
>>> tuple("abc")
('a', 'b', 'c')
>>> tuple((1, 2, 3))
(1, 2, 3)
```

- 要素へのアクセス

他のシーケンスと同じ構文を使う

```
>>> x = 1, 2, 3
>>> x[1]   # インデックス1のタプルの要素を返す
2
>>> x[0:2]   # インデックス0から1までのタプルの要素を返す
(1, 2)
```
